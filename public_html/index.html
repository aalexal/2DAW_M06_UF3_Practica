<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--<script type="text/javascript" src="script.js"></script>-->
        <link rel="stylesheet" type="text/css" href="style.css"/>
    </head>
    <body>
        <h1>Pràctica Formularis</h1>
        <button id="btnIniciCrearNouForm">Crear nou formulari</button>
        <form name="formCrearNomForm" hidden id="formCrearNomForm">
            <div>
                <label>Nom formulari: </label>
                <input id="inputTxtNomNouForm" type="text">
            </div>
            <input id="btnMostraCreaCamp" name="btnCrea" type="button" value="Crear un camp nou">
            <div id="divSelectTypeCamp" style="display: none">
                <form name="creaCamp" id="creaCamp">
                    <input id="inputNouCampTypeText" name="nouCamp" value="Text" type="radio">Text<br>
                    <input id="inputNouCampTypeRadio" name="nouCamp" value="Radio" type="radio">Radio<br>
                    <input id="inputNouCampTypeCheckbox" name="nouCamp" value="Checkbox" type="radio">Checkbox<br>
                    <input id="inputNouCampTypeSelect" name="nouCamp" value="Select" type="radio">Select<br>
                    <input id="submitNouCampType" type="button" value="Acceptar">
                </form>
            </div>
            <div id="divTypeText" style="display: none">
                <form name="textType" id="creaCamp2">
                    <label id="">Introdueix tipus de text que vols entrar</label><br>
                    <input id="typeTxt" name="typeTxt" value="typeTxt" type="radio">Text<br>
                    <input id="typeDigit" name="typeTxt" value="Radio" type="radio">Nombre<br>
                    <input id="typeEmail" name="typeTxt" value="Checkbox" type="radio">Email<br>
                    <input id="typeData" name="typeTxt" value="Select" type="radio">Data<br>
                    <input id="typeFile" name="typeTxt" value="Checkbox" type="radio">Document<br>
                    <input id="submitTypeText" type="button" value="Acceptar" >
                </form>
            </div>
            <div id="divCreaInput">                
                    <input id="inputText" name="inputText" type="text" hidden>
                    <input id="inputDigit" name="inputDigit" type="number" hidden min="0" max="1000">
                    <input id="inputEmail" name="inputEmail" type="email" hidden>
                    <input id="inputData" name="inputData" type="date" hidden>
                    <input id="inputFile" name="inputFile" type="file" hidden>
                    <input id="acceptaValorText" name="acceptaValorText" type="button" hidden value="Acceptar">              
            </div>
            <div id="divTypeRadio" style="display: none">
                <form id="typeRadio">
                    <label>Introdueix quantitat d'opcions</label>
                    <input id="quantitatRadioButtons" name="quantitatRadioButtons" type="number">
                    <input id="btnQuantitatRadio" type="button" value="Acceptar">
                </form>
            </div>
            <div id="divTypeCheckbox" style="display: none">
                <form id="typeCheckbox">
                    <label>Introdueix quantitat d'opcions</label>
                    <input id="txtQuantitatCheckbox" name="txtQuantitatCheckbox" type="number">
                    <input id="btnQuantitatCheckbox" type="button" value="Acceptar">
                </form>
            </div>
            <div id="divTypeSelect" style="display: none">
                <form id="typeSelect">
                    <label>Introdueix quantitat d'opcions</label>
                    <input id="txtQuantitatSelect" name="txtQuantitatSelect" type="number">
                    <input id="btnQuantitatSelect" type="button" value="Acceptar">
                </form>
            </div>
        </form>

    </body>
    <script>
        var form1 = document.getElementById("creaCamp");
        var form2 = document.getElementById("creaCamp2");
        
        //Formulari afegir nom al form
        var formCrearNomForm = document.getElementById("formCrearNomForm");       
        var inputTxtNomNouForm = document.getElementById("inputTxtNomNouForm");
        var btnMostraCreaCamp = document.getElementById("btnMostraCreaCamp");
        
        //inputs amb els diferents tipus d'inputs        
        var inputNouCampTypeText = document.getElementById("inputNouCampTypeText");
        var inputNouCampTypeRadio = document.getElementById("inputNouCampTypeRadio");
        var inputNouCampTypeCheckbox = document.getElementById("inputNouCampTypeCheckbox");
        var inputNouCampTypeSelect = document.getElementById("inputNouCampTypeSelect");
        var submitNouCampType = document.getElementById("submitNouCampType");
        
        
        var divSelectTypeCamp = document.getElementById("divSelectTypeCamp");
        var divTypeText = document.getElementById("divTypeText");
        var divTypeRadio = document.getElementById("divTypeRadio");
        var divTypeCheckbox = document.getElementById("divTypeCheckbox");
        var divTypeSelect = document.getElementById("divTypeSelect");
        var divCreaInput = document.getElementById("divCreaInput");
        
        //radioButton tipus de text
        var typeTxt = document.getElementById("typeTxt");
        var typeDigit = document.getElementById("typeDigit");
        var typeEmail = document.getElementById("typeEmail");
        var typeData = document.getElementById("typeData");
        var typeFile = document.getElementById("typeFile");
        var submitTypeText = document.getElementById("submitTypeText");

        //inputs de x tipus
        var inputText = document.getElementById("inputText");
        var inputDigit = document.getElementById("inputDigit");
        var inputEmail = document.getElementById("inputEmail");
        var inputData = document.getElementById("inputData");
        var inputFile = document.getElementById("inputFile");
        var btnAcceptaTipusText = document.getElementById("acceptaValorText");
        
        //inputs de tipus radio button
        var btnQuantitatRadio = document.getElementById("btnQuantitatRadio");
        var quantitatRadioButtons = document.getElementById("quantitatRadioButtons");
        
        //inputs de tipus checkbox
        var btnQuantitatCheckbox = document.getElementById("btnQuantitatCheckbox");
        var txtQuantitatCheckbox = document.getElementById("txtQuantitatCheckbox");
        
        //inputs de tipus select
        var txtQuantitatSelect = document.getElementById("txtQuantitatSelect");
        var btnQuantitatSelect = document.getElementById("btnQuantitatSelect");
        
        //nou camp a crear      
        var nouCampSelect = document.createElement("select");
        

        var formNouForm;
        var nouForm;
        
        var cont = 0;
        
        //esdeveniments
        btnIniciCrearNouForm.addEventListener("click", crearFormulari);
        btnMostraCreaCamp.addEventListener("click",nouFormulari);
        submitNouCampType.addEventListener("click",getOption);
        submitTypeText.addEventListener("click",getTextOption);
        btnAcceptaTipusText.addEventListener("click",crearCamp);
        btnQuantitatRadio.addEventListener("click", creaRadioButton);
        btnQuantitatCheckbox.addEventListener("click", creaCheckbox);
        btnQuantitatSelect.addEventListener("click", creaSelect);
        
        
        function crearFormulari() {
            formCrearNomForm.style.display = "block";
            formNouForm = document.createElement("form");
        }

        function nouFormulari() {
            //TODO     falta hacer control sobre id
            //formNouForm = document.createElement("form");
            formNouForm.setAttribute("id", inputTxtNomNouForm.value);

            if (inputTxtNomNouForm.value != "") {
                if (divSelectTypeCamp.style.display === "none") {
                    divSelectTypeCamp.style.display = "block";
                    //document.body.appendChild(nouForm);
                }
            } else {
                divSelectTypeCamp.style.display = "none";
            }
        }

        function getOption() {
            //mostrem formulari de selecció de tipus de text
            if (inputNouCampTypeText.checked) {
                if (divTypeText.style.display === "none") {
                    divTypeText.style.display = "block";
                } else {
                    divTypeText.style.display = "none";
                }
            } else if (inputNouCampTypeRadio.checked) {
                if (divTypeRadio.style.display === "none") {
                    divTypeRadio.style.display = "block";
                } else {
                    divTypeRadio.style.display = "none";
                }
            } else if (inputNouCampTypeCheckbox.checked) {
                if (divTypeCheckbox.style.display === "none") {
                    divTypeCheckbox.style.display = "block";
                } else {
                    divTypeCheckbox.style.display = "none";
                }
            } else if (inputNouCampTypeSelect.checked) {
                if (divTypeSelect.style.display === "none") {
                    divTypeSelect.style.display = "block";
                } else {
                    divTypeSelect.style.display = "none";
                }
            }
        }
        function getTextOption() {
            acceptaValorText.removeAttribute("hidden");
            if (typeTxt.checked) {
                inputText.removeAttribute("hidden");
            } else if (typeDigit.checked) {
                inputDigit.removeAttribute("hidden");
            } else if (typeEmail.checked) {
                inputEmail.removeAttribute("hidden");
            } else if (typeData.checked) {
                inputData.removeAttribute("hidden");
            } else if (typeFile.checked) {
                inputFile.removeAttribute("hidden");
            }
        }

        function crearCamp() {
            var nouCampForm = document.createElement("input");
            if (inputNouCampTypeText.checked && typeTxt.checked) {
                nouCampForm.setAttribute("type", "text");
            } else if (inputNouCampTypeText.checked && typeDigit.checked) {
                nouCampForm.setAttribute("type", "number");
            } else if (inputNouCampTypeText.checked && typeEmail.checked) {
                nouCampForm.setAttribute("type", "email");
            } else if (inputNouCampTypeText.checked && typeData.checked) {
                nouCampForm.setAttribute("type", "date");
            } else if (inputNouCampTypeText.checked && typeFile.checked) {
                nouCampForm.setAttribute("type", "file");
            }
            //nouForm.appendChild(nouCampForm);
            
            var lblNouInput = document.createElement("label");
            
            alert(inputText.innerText);
            lblNouInput = inputText.value;
            formNouForm.appendChild(lblNouInput);
            document.body.appendChild(formNouForm);
            
            limpiaPantalla();
        }

        function limpiaPantalla(){
            divSelectTypeCamp.style.display = "none";
            divTypeText.style.display = "none";
            divCreaInput.style.display = "none";
            divTypeRadio.style.display = "none";
            divTypeCheckbox.style.display = "none";
            inputText.style.display = "none";
        }
        
        function creaRadioButton(){
            var quantitat = quantitatRadioButtons.value;
            //inputNouForm.value;
            
            var div = document.createElement("div");
            div.setAttribute("id", "divRadio");
            
            for (var i = 0; i < quantitat; i++) {
                var espai = document.createElement("br");
                var opRadi = document.createElement("input");
                var txtOpRadi = document.createTextNode(prompt("Introdueix valor del Radio Button " + (i+1)));
                var lblTxtRadi = document.createElement("label");
                
                lblTxtRadi.appendChild(txtOpRadi);
                div.appendChild(lblTxtRadi);
                div.insertBefore(opRadi, lblTxtRadi);
                if(i !== 0){
                    div.insertBefore(espai, opRadi);
                }
                
                formNouForm.appendChild(div);
                
                opRadi.setAttribute("type","radio");
                opRadi.setAttribute("id", "op"+cont+"-" + i );
                opRadi.setAttribute("name", "campRadi");
                opRadi.setAttribute("value", txtOpRadi);
                
                document.body.appendChild(formNouForm);
            }

            cont++;
            limpiaPantalla();
        }
        
        function creaCheckbox(){
            var quantitat = txtQuantitatCheckbox.value;
            
            var div = document.createElement("div");
            div.setAttribute("id", "divCheckbox");
            
            for (var i = 0; i < quantitat; i++) {                
                var espai = document.createElement("br");
                var inputCheckbox = document.createElement("input");
                var txtInputCheckbox = document.createTextNode(prompt("Introdueix valor del Checkbox " + (i+1)));
                var lblTxtCheckbox = document.createElement("label");
                
                lblTxtCheckbox.appendChild(txtInputCheckbox);
                div.appendChild(lblTxtCheckbox);
                div.insertBefore(inputCheckbox, lblTxtCheckbox);
                if(i !== 0){
                    div.insertBefore(espai, inputCheckbox);
                }
                
                formNouForm.appendChild(div);
                
                inputCheckbox.setAttribute("type","checkbox");
                inputCheckbox.setAttribute("id", "checkbox"+cont+"-" + i );
                inputCheckbox.setAttribute("name", "campRadi");
                inputCheckbox.setAttribute("value", txtInputCheckbox);
                
                document.body.appendChild(formNouForm);
            }
            cont++;
            limpiaPantalla();
        }
        
        function creaSelect(){
            var quantitat = txtQuantitatSelect.value;
            var div = document.createElement("div");
            div.setAttribute("id", "divSelect"+cont);
            
            var inputSelect = document.createElement("select");
            for (var i = 0; i < quantitat; i++) {
                var espai = document.createElement("br");
                var optionSelect = document.createElement("option");
                var txtInputSelect = document.createTextNode(prompt("Introdueix valor del Select " + (i+1)));
                
                optionSelect.setAttribute("value", txtInputSelect);
                optionSelect.text = txtInputSelect;
                inputSelect.appendChild(optionSelect);
                //div.insertBefore(inputSelect, txtQuantitatSelect);
                
                
            }
            div.appendChild(inputSelect);
            formNouForm.appendChild(div);
            document.body.appendChild(formNouForm);

            cont++;
        }
        /*
         btnCrear = document.getElementById("btnCrea");
         
         btnCrear.addEventListener("click", creaForm);
         
         function creaForm() {
         var form = document.createElement("form");
         
         var divNomForm = document.createElement("div");
         var nomFormtxt = document.createTextNode("Nom formulari: ");
         var nomForm = document.createElement("input");
         nomForm.setAttribute("id", "nomForm");
         
         divNomForm.appendChild(nomFormtxt);
         divNomForm.appendChild(nomForm);
         
         var divNouCamp = document.createElement("div");
         var campoACrear = document.createTextNode("Selecciona camp a crear: ");
         //Radio txt
         var radioTxt = document.createElement("input");
         var radioTxtTxt = document.createTextNode("Text");
         radioTxt.setAttribute("id", "radioTxt");
         radioTxt.setAttribute("name", "radioTxt");
         radioTxt.setAttribute("type", "radio");
         radioTxt.setAttribute("value", "Texto");
         
         radioTxt.appendChild(radioTxtTxt);
         divNouCamp.appendChild(campoACrear);
         divNouCamp.appendChild(radioTxt);
         
         //Radio radio
         var radioRadio = document.createElement("input");
         radioRadio.setAttribute("id", "radioRadio");
         radioRadio.setAttribute("type", "radio");
         
         var crearForm = document.createElement("button");
         var crearFormtxt = document.createTextNode("Crear formulari");
         
         form.appendChild(divNomForm);
         form.appendChild(divNouCamp);
         crearForm.appendChild(crearFormtxt);
         form.appendChild(crearForm);
         document.body.appendChild(form);
         }
         */
    </script>
</html>
